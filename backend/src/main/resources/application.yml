server:
  port: 8080

spring:
  application:
    name: ai-agent-standalone
  
  # Redis配置（用于存储对话、文档元数据、知识库等）
  # 注意：本项目不使用MySQL，所有数据存储在Redis中
  redis:
    host: localhost
    port: 6379
    password: 
    database: 0
    timeout: 5000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
  
  # 注意：本项目不依赖MySQL
  # DocumentRepository和KnowledgeBaseRepository都使用Redis实现
  # 如需使用MySQL，需要添加以下依赖和配置：
  # - spring-boot-starter-data-jpa
  # - mysql-connector-java
  # datasource:
  #   url: jdbc:mysql://localhost:3306/aiagent?useUnicode=true&characterEncoding=utf8
  #   username: root
  #   password: password
  #   driver-class-name: com.mysql.cj.jdbc.Driver

# AI Agent 配置
aiagent:
  # LLM配置
  llm:
    # 模型列表配置（支持多个模型，按id引用）
    models:
      - id: gpt-4o-mini
        name: GPT-4o Mini
        provider: OPENAI
        api-key:
        base-url: https://api.openai.com/v1
      - id: gpt-4o
        name: GPT-4o
        provider: OPENAI
        api-key:
        base-url: https://api.openai.com/v1
    # 默认模型ID（从上面的models列表中选择）
    default-model: gpt-4o-mini
  
  # 模型配置
  model:
    default-model-id: gpt-4o-mini
    # 任务模型映射（值为模型ID列表，按顺序尝试，前面的失败会尝试后面的）
    task-model-mapping:
      SIMPLE_CHAT:
        - gpt-4o-mini
      RAG_QUERY:
        - gpt-4o-mini
      TOOL_CALL:
        - gpt-4o
        - gpt-4o-mini
      COMPLEX_WORKFLOW:
        - gpt-4o
        - gpt-4o-mini
  
  memory:
    short-term-expire-hours: 24
    context-expire-hours: 1
    max-context-window: 20
  
  rag:
    default-top-k: 5
    default-min-score: 0.5
    # 向量存储配置（PostgreSQL + pgvector）
    # 注意：RAG功能需要PostgreSQL数据库并安装pgvector扩展
    # 安装pgvector扩展命令：
    #   CREATE EXTENSION vector;
    # 如果不需要RAG功能，可以不配置此项
    embedding-store:
      host: localhost
      port: 5432
      database: aiagent
      user: postgres
      password: postgres
      table: embeddings
      use-index: true
      index-list-size: 100
    # 文档分段配置
    document:
      segment-size: 1000
      overlap-size: 50
    # 文件上传配置
    upload:
      path: ./uploads
      max-file-size: 157286400  # 150MB
      max-zip-size: 1073741824  # 1GB
      max-zip-entries: 10000
  
  tools:
    enabled-by-default: true
  
  # MCP工具配置
  # 注意：MCP服务器配置已迁移到 JSON 文件
  # 默认路径：resources/config/mcp.json（classpath 资源，不支持热加载）
  # 可通过 config-path 指定外部文件路径以支持热加载
  mcp:
    # 是否启用MCP功能
    enabled: true
    # 配置文件路径（可选）
    # 默认：classpath:config/mcp.json（resources/config/mcp.json）
    # 如果指定外部文件路径，则支持热加载
    # config-path: config/mcp.json
    # 是否启用热加载（默认：true，仅对外部文件有效）
    # hot-reload: true

# SpringDoc API 文档
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html


